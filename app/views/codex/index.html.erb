<!-- app/views/codex/index.html.erb -->

<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-center mb-6">Codex</h1>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 text-center">
    <% @links.each do |link| %>
      <div class="flex flex-col items-center">
        <%= link_to send("#{link[:path]}_path"), class: "block p-4 text-white font-bold bg-blue-600 hover:bg-blue-700 rounded shadow" do %>
          <%= image_tag(link[:image], alt: link[:title], class: "mx-auto w-32 h-32 object-cover rounded") %>
          <p><%= link[:title] %></p>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<script>
function loadCategoryData(category) {
  const url = `/api/${category}`;
  const targetDiv = document.getElementById(`${category}_details`);
  fetch(url)
    .then(response => response.json())
    .then(data => {
      targetDiv.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
    })
    .catch(error => {
      targetDiv.innerHTML = `<div class="text-red-500">Error loading ${category}: ${error.message}</div>`;
    });
}
</script>